<!DOCTYPE html>
<html lang="de" class="theme-dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="ARea Editor v3 â€“ WebAR Szenen erstellen und publizieren.">
  <title>ARea Editor v3</title>
 
  <!-- kleines Inline-Favicon, verhindert 404 auf /favicon.ico -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ctext y='14' font-size='14'%3EðŸ…°ï¸%3C/text%3E%3C/svg%3E">

  <link rel="stylesheet" href="styles.css">

  <!-- three.js Import Map -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>

  <div id="drop-overlay" role="dialog" aria-hidden="true">
    <p>GLB-Modell(e) hier ablegen</p>
  </div>

  <input
    type="file"
    id="asset-upload-input"
    accept=".glb,.gltf,.usdz,.bin,.jpg,.jpeg,.png,.webp,.mp3,.ogg,.m4a,.mp4,.webm"
    multiple
    hidden>

  <div id="editor-layout">
    <main id="viewport-container">
      <canvas id="main-canvas" aria-label="3D Vorschau der Szene"></canvas>
    </main>

    <aside id="sidebar">
      <header class="sidebar-header">
        <h1>Szene</h1>
        <button id="btnPublish" class="action-btn">ðŸš€ Publizieren</button>
      </header>

      <div id="publish-status" aria-live="polite"></div>

      <section id="hierarchy-panel">
        <h2>Objekte</h2>
        <ul id="object-list">
          <li class="empty-state">Keine Objekte</li>
        </ul>
      </section>

      <section id="properties-panel">
        <h2>Eigenschaften</h2>

        <div id="prop-content" class="hidden">
          <div class="prop-row">
            <label for="inp-name">Name</label>
            <input type="text" id="inp-name">
          </div>

          <div class="prop-group">
            <span class="label-group">Position (X / Y=HÃ¶he / Z=Tiefe)</span>
            <div class="vec3-input">
              <input type="number" id="inp-px" step="0.1" aria-label="Position X">
              <input type="number" id="inp-py" step="0.1" aria-label="Position Y">
              <input type="number" id="inp-pz" step="0.1" aria-label="Position Z">
            </div>
          </div>

          <div class="prop-group">
            <span class="label-group">Rotation (Â°)</span>
            <div class="vec3-input">
              <input type="number" id="inp-rx" step="15" aria-label="Rotation X">
              <input type="number" id="inp-ry" step="15" aria-label="Rotation Y">
              <input type="number" id="inp-rz" step="15" aria-label="Rotation Z">
            </div>
          </div>

          <div class="prop-group">
            <label for="inp-s">Skalierung</label>
            <input type="number" id="inp-s" step="0.1" value="1">
          </div>

          <div class="prop-group">
            <label for="inp-link-url">Link-URL (optional)</label>
            <input type="url" id="inp-link-url" placeholder="https://â€¦">
          </div>
        </div>

        <p id="prop-empty" class="empty-state">WÃ¤hle ein Objekt aus.</p>
      </section>

      <!-- NEU: Meta-/Poster-Panel -->
      <section id="meta-panel">
        <h2>Szene / Poster</h2>

        <div class="prop-group">
          <label for="inp-meta-title">Titel</label>
          <input type="text" id="inp-meta-title" placeholder="z.B. Mein AR-Modell">
        </div>

        <div class="prop-group">
          <label for="inp-meta-subtitle">Subline</label>
          <input type="text" id="inp-meta-subtitle" placeholder="kurze Zusatzzeile">
        </div>

        <div class="prop-group">
          <label for="inp-meta-body">Beschreibung</label>
          <textarea id="inp-meta-body" rows="3" placeholder="Kurzbeschreibung fÃ¼r das Willkommensposterâ€¦"></textarea>
        </div>

        <div class="prop-group">
          <label for="sel-poster-image">Posterbild (optional)</label>
          <select id="sel-poster-image">
            <option value="">â€” kein Posterbild â€”</option>
          </select>
          <p class="hint" style="margin-top:4px;font-size:11px;">
            WÃ¤hle ein Bild aus den Assets. Dieses wird im Viewer als Willkommensposter angezeigt.
          </p>
        </div>
      </section>

      <section id="audio-panel">
        <h2>Audio</h2>
        <div class="prop-group">
          <label for="sel-audio-file">Audio-Datei</label>
          <select id="sel-audio-file">
            <option value="">â€” kein Audio â€”</option>
          </select>
        </div>
        <div class="prop-row">
          <label><input type="checkbox" id="chk-audio-loop"> Loop</label>
        </div>
        <div class="prop-row">
          <label for="inp-audio-delay">Delay (Sek.)</label>
          <input type="number" id="inp-audio-delay" min="0" step="0.1" placeholder="0">
        </div>
        <div class="prop-row">
          <label for="inp-audio-vol">Volume (0â€“1)</label>
          <input type="number" id="inp-audio-vol" min="0" max="1" step="0.05" value="0.8">
        </div>
      </section>

      <section id="assets-panel">
        <h2>Assets</h2>
        <div class="assets-toolbar">
          <button id="btnAddAssets" type="button">âž• Dateien wÃ¤hlen</button>
          <span class="hint">UnterstÃ¼tzt: GLB/Gltf, Bilder, Audio, Video</span>
        </div>
        <div id="asset-dropzone" aria-label="Dateien hier ablegen (GLB, Bilder, Audio, Video)">
          <p>Dateien hier ablegen oder Button nutzen</p>
        </div>
        <ul id="asset-list" class="asset-list">
          <li class="empty">Noch keine Assets</li>
        </ul>
      </section>
    </aside>
  </div>

  <!-- Bootstrap: SceneManager erzeugen (muss VOR dem Controls-Addon da sein) -->
  <script type="module" src="js/main.js"></script>
  <!-- Controls/Publishing UI-Addon (nutzt window.sceneManager) -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
